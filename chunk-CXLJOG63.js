import{a as $}from"./chunk-GKQ5SLIY.js";import{a as z}from"./chunk-GSGDNTVC.js";import{a as D,b as I,c as s,d as O,e as V,f as T,h as L,i as R,n as j,o as G}from"./chunk-ACG7GV2X.js";import{J as M,X as A}from"./chunk-P7LCE7ML.js";import{b as q,d as B}from"./chunk-GYU5LNTV.js";import"./chunk-7DV4EETS.js";import"./chunk-Q6J33HRF.js";import{o as P}from"./chunk-OEVEVLY2.js";import{$a as w,Bb as a,Cb as E,Fb as N,Ja as m,Ka as k,Y as F,gb as h,jb as x,nb as r,ob as t,pb as p,ra as c,tb as f,ub as y}from"./chunk-XLW5XAEJ.js";function J(i,l){if(i&1&&(r(0,"div",20),p(1,"p",21),t()),i&2){let g=y(),o;m(),h("errors",(o=g.editForm.get("name"))==null?null:o.errors)("fieldName","name")}}function W(i,l){if(i&1&&(r(0,"div",20),p(1,"p",21),t()),i&2){let g=y(),o;m(),h("errors",(o=g.editForm.get("details"))==null?null:o.errors)("fieldName","details")}}var ie=(()=>{let l=class l{constructor(o){this.placesService=o,this.fb=c(j),this.router=c(A),this.route=c(M),this.propertyService=c(z),this.placesApiClient=c(q),this.formSubmitted=!1,this.propertyId=0,this.propertyName=null,this.editForm=this.fb.group({name:["",[s.required,s.minLength(3),s.maxLength(50)]],details:["",[s.required,s.minLength(3),s.maxLength(500)]],is_available:[!1,s.required]}),this.route.params.subscribe(n=>{this.propertyId=n.id,this.propertyService.getPropertyById(this.propertyId).subscribe(e=>{this.editForm.patchValue(e),this.propertyName=e.name})})}onSubmit(){if(this.formSubmitted=!0,this.editForm.valid){let o=this.editForm.value;this.propertyService.updatePropertyJWT(this.propertyId,o).subscribe(()=>{this.router.navigate(["/publish/properties"])})}}onAddressChange(){let o=this.editForm.get("address"),n=this.editForm.get("postalCode"),e=this.editForm.get("latitude"),d=this.editForm.get("longitude");if(console.log("onAddressChange"),o&&n&&e&&d){let u=o.value,C=n.value;u&&C&&this.placesApiClient.get(`/${u}, ${C}.json`,{}).subscribe(v=>{let{features:b}=v;if(console.log(b),b.length>0){let{center:_}=b[0];e.setValue(_[1]),d.setValue(_[0]);let S=this.placesService.getCityFromFeature(b[0]);this.editForm.get("city").setValue(S),console.log(S)}},v=>{console.log(v)})}}onNoClick(){this.router.navigate(["/publish/properties"])}};l.\u0275fac=function(n){return new(n||l)(k(B))},l.\u0275cmp=F({type:l,selectors:[["app-edit"]],standalone:!0,features:[N],decls:33,vars:4,consts:[[1,"cntainer","mx-auto","px-5","my-10"],[1,"w-full","mx-auto","justify-center","max-w-[45rem]"],[1,"btn","btn-small","btn-outline-primary",3,"click"],[1,"text-center","text-4xl","font-semibold","mb-5"],[1,"form"],[1,"mb-4","text-lg"],[1,"font-semibold"],[3,"formGroup","ngSubmit"],[1,"mb-4"],[1,"mb-2"],["for","name"],["formControlName","name","id","name","type","text","placeholder","Name",1,"w-full"],["class","w-full bg-red-100 px-2 py-[0.4rem] rounded-md border border-red-500 text-sm text-red-500"],["for","details"],["name","details","rows","10","formControlName","details","id","details","type","text","placeholder","Details",1,"w-full"],[1,"mb-4","flex"],["for","is_available"],["formControlName","is_available","id","is_available","type","checkbox"],[1,"flex","items-center","gap-5"],["type","submit",1,"btn","btn-normal","btn-primary",3,"click"],[1,"w-full","bg-red-100","px-2","py-[0.4rem]","rounded-md","border","border-red-500","text-sm","text-red-500"],["roomLabel","",3,"errors","fieldName"]],template:function(n,e){if(n&1&&(r(0,"div",0)(1,"div",1)(2,"button",2),f("click",function(){return e.onNoClick()}),a(3," Back "),t(),r(4,"h1",3),a(5," Edit Property Details "),t(),r(6,"div",4)(7,"h2",5),a(8," Editing Room: "),r(9,"span",6),a(10),t()(),r(11,"div")(12,"form",7),f("ngSubmit",function(){return e.onSubmit()}),r(13,"div")(14,"div",8)(15,"div",9)(16,"label",10),a(17,"Name"),t(),p(18,"input",11),t(),w(19,J,2,2,"div",12),t(),r(20,"div",8)(21,"div",9)(22,"label",13),a(23,"Details"),t(),p(24,"textarea",14),t(),w(25,W,2,2,"div",12),t(),r(26,"div",15)(27,"label",16),a(28,"Is Available"),t(),p(29,"input",17),t()()()(),r(30,"div",18)(31,"button",19),f("click",function(){return e.onSubmit()}),a(32," Save "),t()()()()()),n&2){let d,u;m(10),E(e.propertyName),m(2),h("formGroup",e.editForm),m(7),x(19,e.formSubmitted&&((d=e.editForm.get("name"))!=null&&d.errors)?19:-1),m(6),x(25,e.formSubmitted&&((u=e.editForm.get("details"))!=null&&u.errors)?25:-1)}},dependencies:[P,G,T,I,D,O,V,L,R,$],styles:[".form[_ngcontent-%COMP%]{width:100%;border-radius:.25rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(228 228 231 / var(--tw-border-opacity));--tw-bg-opacity: 1;background-color:rgb(250 250 250 / var(--tw-bg-opacity));padding:1.25rem 1.25rem 1.5rem;--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}[_ngcontent-%COMP%]:is(.dark   .form)[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:hsl(0 0% 25% / var(--tw-bg-opacity))}label[_ngcontent-%COMP%]{margin-bottom:.5rem;display:block;font-weight:700}input[_ngcontent-%COMP%]{display:block;border-radius:.375rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(228 228 231 / var(--tw-border-opacity));padding:.5rem .75rem;line-height:1.25rem;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}input[_ngcontent-%COMP%]:focus{--tw-border-opacity: 1;border-color:hsl(161.647 70% 52% / var(--tw-border-opacity));--tw-shadow: 0 0 2px 3px hsla(161.647, 70%, 52%, .3);--tw-shadow-colored: 0 0 2px 3px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);outline:2px solid transparent;outline-offset:2px}textarea[_ngcontent-%COMP%]{display:block;border-radius:.375rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(228 228 231 / var(--tw-border-opacity));padding:.5rem .75rem;line-height:1.25rem;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}textarea[_ngcontent-%COMP%]:focus{--tw-border-opacity: 1;border-color:hsl(161.647 70% 52% / var(--tw-border-opacity));--tw-shadow: 0 0 2px 3px hsla(161.647, 70%, 52%, .3);--tw-shadow-colored: 0 0 2px 3px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);outline:2px solid transparent;outline-offset:2px}"]});let i=l;return i})();export{ie as default};
