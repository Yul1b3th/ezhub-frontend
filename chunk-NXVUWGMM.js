import{a as k}from"./chunk-TYVXPFJG.js";import{a as j}from"./chunk-TEHB7NO6.js";import{d as Q}from"./chunk-GYU5LNTV.js";import{a as T}from"./chunk-7DV4EETS.js";import{c as y}from"./chunk-Q6J33HRF.js";import{o as L}from"./chunk-OEVEVLY2.js";import{$a as l,Bb as m,Fb as D,Ja as v,Ka as s,Va as g,Xb as u,Y as d,ab as _,bb as S,jb as C,nb as p,ob as f,pb as x,ra as h,ub as b,xb as P,yb as M,zb as w}from"./chunk-XLW5XAEJ.js";var E=["map"],F=()=>[import("./chunk-F5W6C2V5.js").then(e=>e.default)];function N(e,r){e&1&&x(0,"map-with-marker")}function O(e,r){e&1&&(p(0,"p",0),m(1,"There are no items."),f())}function U(e,r){if(e&1&&l(0,N,1,0,"map-with-marker")(1,O,2,0),e&2){let I=b();C(0,I.properties().length>0?0:1)}}function z(e,r){e&1&&(p(0,"p"),m(1,"Loading..."),f())}var K=(()=>{let r=class r{constructor(t,n,i){this.publicPropertyService=t,this.placesService=n,this.queryService=i,this.http=h(y),this.baseUrl=T.baseUrl,this.markers=[],this.lngLat=[2.187975058256683,41.392281189125214],this.cond=!1,this.stateSignal=g({loading:!0,properties:[]}),this.properties=u(()=>this.stateSignal().properties),this.loading=u(()=>this.stateSignal().loading)}ngOnInit(){this.queryService.query$.subscribe(t=>{this.filterProperties(t)})}filterProperties(t=""){this.publicPropertyService.getPublicProperties().subscribe(n=>{let i=[];n.forEach(o=>{let a=0,c=0;this.placesService.useLocation&&([a,c]=this.placesService.useLocation),a!==0&&c!==0&&!t&&this.placesService.calculateDistance(a,c,Number(o.longitude),Number(o.latitude))&&i.push(o),t&&(o.city.toLowerCase().includes(t.toLowerCase())&&i.push(o),o.postalCode.includes(t)&&i.push(o)),!this.placesService.useLocation&&!t&&i.push(o)}),i&&(this.cond=!0),this.stateSignal.set({loading:!1,properties:i})})}};r.\u0275fac=function(n){return new(n||r)(s(j),s(Q),s(k))},r.\u0275cmp=d({type:r,selectors:[["app-map"]],viewQuery:function(n,i){if(n&1&&P(E,5),n&2){let o;M(o=w())&&(i.divMap=o.first)}},standalone:!0,features:[D],decls:4,vars:1,consts:[[1,"text-lg","text-center"]],template:function(n,i){n&1&&(l(0,U,2,1)(1,z,2,0),_(2,0,F,null,1)),n&2&&(v(2),S(i.cond))},dependencies:[L],styles:[".marker[_ngcontent-%COMP%]{color:#fff;padding:10px;border-radius:5px;font-size:14px;font-weight:700}"]});let e=r;return e})();export{K as default};
