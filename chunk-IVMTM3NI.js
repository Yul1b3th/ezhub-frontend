import{a as T}from"./chunk-7XM6POU6.js";import{b as F,c as p,d as P,e as M,f as N,h as O,i as R,n as k,o as L}from"./chunk-ACG7GV2X.js";import{b as E}from"./chunk-734SZ5UB.js";import{X as S}from"./chunk-P7LCE7ML.js";import"./chunk-7DV4EETS.js";import"./chunk-Q6J33HRF.js";import{o as C}from"./chunk-OEVEVLY2.js";import{$a as b,Bb as d,Fb as y,Ja as m,Y as x,gb as c,jb as f,nb as o,ob as r,pb as h,ra as w,tb as g,ub as v}from"./chunk-XLW5XAEJ.js";function A(n,l){if(n&1&&(o(0,"div",18),h(1,"p",19),r()),n&2){let u=v(),e;m(),c("errors",(e=u.registerForm.get("username"))==null?null:e.errors)("fieldName","username")}}function U(n,l){if(n&1&&(o(0,"div",18),h(1,"p",19),r()),n&2){let u=v(),e;m(),c("errors",(e=u.registerForm.get("email"))==null?null:e.errors)("fieldName","email")}}function V(n,l){if(n&1&&(o(0,"div",18),h(1,"p",19),r()),n&2){let u=v(),e;m(),c("errors",(e=u.registerForm.get("password"))==null?null:e.errors)("fieldName","password")}}var I=(()=>{let l=class l{constructor(){this.fb=w(k),this.authService=w(E),this.router=w(S),this.emailPattern="^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\\.[a-zA-Z]{2,4}$",this.formSubmitted=!1,this.registerForm=this.fb.group({username:["",[p.required,p.minLength(3)]],email:["",[p.required,p.minLength(4),p.pattern(this.emailPattern)]],password:["",[p.required,p.minLength(6)]]})}onSubmit(){if(this.formSubmitted=!0,this.registerForm.valid){let{username:e,email:t,password:i}=this.registerForm.value;e&&t&&i&&this.authService.register(e.toLowerCase(),t.toLowerCase(),i).subscribe({next:()=>{this.authService.login(e.toLowerCase(),i).subscribe({next:()=>{this.router.navigate(["/list"])},error:a=>{console.error(a)}})},error:a=>{a.error.message==="Username is already in use"?this.registerForm.get("username")?.setErrors({usernameExists:!0}):a.error.message==="Email is already in use"?this.registerForm.get("email")?.setErrors({emailExists:!0}):console.error(a)}})}}cleanUsername(e){let t=e.target;t.value=t.value.replace(/\s/g,""),this.registerForm.get("username")?.setValue(t.value)}cleanEmail(e){let t=e.target;t.value=t.value.trim().replace(/[^a-zA-Z0-9.@_-]+/g,""),this.registerForm.get("email")?.setValue(t.value)}cleanPassword(e){let t=e.target;t.value=t.value.replace(/\s/g,""),this.registerForm.get("password")?.setValue(t.value)}};l.\u0275fac=function(t){return new(t||l)},l.\u0275cmp=x({type:l,selectors:[["app-register"]],standalone:!0,features:[y],decls:31,vars:4,consts:[[1,"container","mx-auto","px-5","my-10"],[1,"form"],[3,"formGroup","ngSubmit"],[1,"font-bold","text-lg","mb-3"],[1,"mb-4"],[1,"mb-2"],["for","username"],["formControlName","username","id","username","type","text","placeholder","Username",3,"input"],["class","w-full bg-red-100 px-2 py-[0.4rem] rounded-md border border-red-500 text-sm text-red-500"],["for","email"],["formControlName","email","id","email","type","email","placeholder","Email",3,"input"],[1,"mb-6"],["for","password"],["formControlName","password","id","password","type","password","placeholder","******************",3,"input"],[1,"flex","items-center","justify-between","mb-2"],["type","submit",1,"btn","btn-normal","btn-primary"],[1,"sign-in"],["href","/log-in"],[1,"w-full","bg-red-100","px-2","py-[0.4rem]","rounded-md","border","border-red-500","text-sm","text-red-500"],["customLabel","",3,"errors","fieldName"]],template:function(t,i){if(t&1&&(o(0,"div",0)(1,"div",1)(2,"form",2),g("ngSubmit",function(){return i.onSubmit()}),o(3,"p",3),d(4,"Create an account"),r(),o(5,"div",4)(6,"div",5)(7,"label",6),d(8," Username "),r(),o(9,"input",7),g("input",function(s){return i.cleanUsername(s)}),r()(),b(10,A,2,2,"div",8),r(),o(11,"div",4)(12,"div",5)(13,"label",9),d(14," Email "),r(),o(15,"input",10),g("input",function(s){return i.cleanEmail(s)}),r()(),b(16,U,2,2,"div",8),r(),o(17,"div",11)(18,"div",5)(19,"label",12),d(20," Password "),r(),o(21,"input",13),g("input",function(s){return i.cleanPassword(s)}),r()(),b(22,V,2,2,"div",8),r(),o(23,"div",14)(24,"button",15),d(25," Sign Up "),r()()()(),o(26,"div",16)(27,"p",5),d(28,"Already hace an account?"),r(),o(29,"a",17),d(30,"Sign in"),r()()()),t&2){let a,s,_;m(2),c("formGroup",i.registerForm),m(8),f(10,i.formSubmitted&&((a=i.registerForm.get("username"))!=null&&a.errors)?10:-1),m(6),f(16,i.formSubmitted&&((s=i.registerForm.get("email"))!=null&&s.errors)?16:-1),m(6),f(22,i.formSubmitted&&((_=i.registerForm.get("password"))!=null&&_.errors)?22:-1)}},dependencies:[C,L,N,F,P,M,O,R,T],styles:[".form[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-bottom:1rem;width:100%;max-width:24rem;border-radius:.25rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(228 228 231 / var(--tw-border-opacity));--tw-bg-opacity: 1;background-color:rgb(250 250 250 / var(--tw-bg-opacity));padding:1.25rem;--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}[_ngcontent-%COMP%]:is(.dark   .form)[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:hsl(0 0% 25% / var(--tw-bg-opacity))}.sign-in[_ngcontent-%COMP%]{margin-left:auto;margin-right:auto;margin-bottom:1rem;width:100%;max-width:24rem;border-radius:.25rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(228 228 231 / var(--tw-border-opacity));padding:1.25rem;--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}a[_ngcontent-%COMP%]{font-weight:500;--tw-text-opacity: 1;color:hsl(176.809 94% 20% / var(--tw-text-opacity))}a[_ngcontent-%COMP%]:hover{text-decoration-line:underline}label[_ngcontent-%COMP%]{margin-bottom:.5rem;display:block;font-weight:700}input[_ngcontent-%COMP%]{display:block;width:100%;border-radius:.375rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(228 228 231 / var(--tw-border-opacity));padding:.5rem .75rem;line-height:1.25rem;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}input[_ngcontent-%COMP%]:focus{--tw-border-opacity: 1;border-color:hsl(161.647 70% 52% / var(--tw-border-opacity));--tw-shadow: 0 0 2px 3px hsla(161.647, 70%, 52%, .3);--tw-shadow-colored: 0 0 2px 3px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);outline:2px solid transparent;outline-offset:2px}[_ngcontent-%COMP%]:is(.dark   input)[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:hsl(0 0% 25% / var(--tw-text-opacity))}"]});let n=l;return n})();export{I as default};
