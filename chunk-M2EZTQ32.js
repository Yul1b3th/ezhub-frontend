import{b as M,c as u,d as P,e as F,f as k,h as N,i as O,n as I,o as T}from"./chunk-ACG7GV2X.js";import{a as R}from"./chunk-TYVXPFJG.js";import{a as B}from"./chunk-6L5XN4ZG.js";import{a as q}from"./chunk-TEHB7NO6.js";import{d as L}from"./chunk-GYU5LNTV.js";import{o as E}from"./chunk-OEVEVLY2.js";import{$a as y,Aa as w,Fb as S,Ja as c,Ka as o,Y as f,_ as g,ea as v,gb as d,jb as b,nb as h,ob as a,pb as x,ra as m,tb as _,ub as C,w as p}from"./chunk-XLW5XAEJ.js";var D=(()=>{let r=class r{set errors(e){this._errors=e}constructor(e){this.el=e,this._errors=null,this.fieldName="",this.htmlElement=e,this.htmlElement.nativeElement.innerHTML="red"}ngOnChanges(){this.setErrorMessage()}setStyle(){this.htmlElement&&this.htmlElement.nativeElement.classList.add("text-sm","text-red-500")}setErrorMessage(){if(!this.htmlElement)return;if(!this._errors){this.htmlElement.nativeElement.innerHTML="";return}let e=Object.keys(this._errors);if(e.includes("required")){this.htmlElement.nativeElement.innerText="City or Postal Code is required.";return}if(e.includes("minlength")){let t=this._errors.minlength.requiredLength,i=this._errors.minlength.actualLength;this.htmlElement.nativeElement.innerText=`Minimum ${i}/${t} characters.`;return}if(e.includes("maxlength")){let t=this._errors.maxlength.requiredLength,i=this._errors.maxlength.actualLength;this.htmlElement.nativeElement.innerText=`Maximum ${i}/${t} characters.`;return}if(e.includes("pattern")){this.htmlElement.nativeElement.innerText="Invalid pattern format.";return}}};r.\u0275fac=function(t){return new(t||r)(o(v))},r.\u0275dir=g({type:r,selectors:[["","searchBarLabel",""]],inputs:{fieldName:"fieldName",errors:"errors"},standalone:!0,features:[w]});let n=r;return n})();function G(n,r){if(n&1&&(h(0,"div",4),x(1,"p",5),a()),n&2){let j=C(),e;c(),d("errors",(e=j.searchForm.get("searchControl"))==null?null:e.errors)("fieldName","searchControl")}}var ee=(()=>{let r=class r{constructor(e,t,i){this.placesService=e,this.publicPropertyService=t,this.queryService=i,this.fb=m(I),this.publicRoomService=m(B),this.searchForm=this.fb.group({searchControl:["",[u.minLength(3),u.required]]}),this.formSubmitted=!1}ngOnInit(){}onSubmit(){this.formSubmitted=!0;let e=this.searchForm.get("searchControl")?.value;e=e?.trim(),(e??"").length>3&&(/^[01-52]\d{4}$/.test(e)?this.placesService.checkPostalCode(e).pipe(p(t=>({query:e,exists:t}))).subscribe(({query:t,exists:i})=>{i&&(this.publicRoomService.filterRooms(t),this.queryService.setQuery(t))}):(this.publicRoomService.filterRooms(e),this.queryService.setQuery(e)))}cleanInput(e){let t=e.target;t.value=t.value.replace(/\s+/g," ")}preventInitialSpace(e){e.target.value.length===0&&e.key===" "&&e.preventDefault()}};r.\u0275fac=function(t){return new(t||r)(o(L),o(q),o(R))},r.\u0275cmp=f({type:r,selectors:[["search-bar"]],standalone:!0,features:[S],decls:4,vars:2,consts:[[1,"example-form","w-full",3,"formGroup"],[1,"mb-2"],["type","text","placeholder","Enter City or Postal Code","formControlName","searchControl",1,"",3,"input","keydown","keydown.enter"],["class","w-full bg-red-100 px-2 py-[0.4rem] rounded-md border border-red-500 text-sm text-red-500"],[1,"w-full","bg-red-100","px-2","py-[0.4rem]","rounded-md","border","border-red-500","text-sm","text-red-500"],["searchBarLabel","",3,"errors","fieldName"]],template:function(t,i){if(t&1&&(h(0,"form",0)(1,"div",1)(2,"input",2),_("input",function(l){return i.cleanInput(l)})("keydown",function(l){return i.preventInitialSpace(l)})("keydown.enter",function(){return i.onSubmit()}),a()(),y(3,G,2,2,"div",3),a()),t&2){let s;d("formGroup",i.searchForm),c(3),b(3,i.formSubmitted&&((s=i.searchForm.get("searchControl"))!=null&&s.errors)?3:-1)}},dependencies:[E,T,k,M,P,F,N,O,D],styles:[".example-form[_ngcontent-%COMP%], .example-full-width[_ngcontent-%COMP%]{width:100%}.button[_ngcontent-%COMP%]{display:block;width:max-content;border-radius:9999px;padding:1rem 3rem}body[_ngcontent-%COMP%]{margin:0;font-family:BeVietnamPro,sans-serif;font-size:1rem;line-height:1.5rem;font-weight:400;--tw-text-opacity: 1;color:hsl(0 0% 25% / var(--tw-text-opacity))}input[_ngcontent-%COMP%]{display:block;width:100%;border-radius:9999px;border-width:1px;--tw-border-opacity: 1;border-color:hsl(161.647 70% 52% / var(--tw-border-opacity));padding:.5rem .75rem;line-height:1.25rem;transition-property:all;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}input[_ngcontent-%COMP%]:focus{--tw-border-opacity: 1;border-color:hsl(161.647 70% 52% / var(--tw-border-opacity));--tw-shadow: 0 0 2px 3px hsla(161.647, 70%, 52%, .3);--tw-shadow-colored: 0 0 2px 3px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);outline:2px solid transparent;outline-offset:2px;--tw-ring-offset-shadow: var(--tw-ring-inset) 0 0 0 var(--tw-ring-offset-width) var(--tw-ring-offset-color);--tw-ring-shadow: var(--tw-ring-inset) 0 0 0 calc(2px + var(--tw-ring-offset-width)) var(--tw-ring-color);box-shadow:var(--tw-ring-offset-shadow),var(--tw-ring-shadow),var(--tw-shadow, 0 0 #0000);--tw-ring-opacity: 1;--tw-ring-color: hsl(157.864 67% 70% / var(--tw-ring-opacity))}[_ngcontent-%COMP%]:is(.dark   input)[_ngcontent-%COMP%]{--tw-text-opacity: 1;color:hsl(0 0% 25% / var(--tw-text-opacity))}"]});let n=r;return n})();export{ee as a};
