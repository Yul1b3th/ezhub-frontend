import{a as R}from"./chunk-GKQ5SLIY.js";import{a as I}from"./chunk-GSGDNTVC.js";import{a as P,b as M,c as o,d as q,e as O,f as T,h as L,i as D,n as V,o as j}from"./chunk-ACG7GV2X.js";import{X as A}from"./chunk-P7LCE7ML.js";import{b as z,d as G}from"./chunk-GYU5LNTV.js";import"./chunk-7DV4EETS.js";import"./chunk-Q6J33HRF.js";import{o as k}from"./chunk-OEVEVLY2.js";import{$a as g,Bb as m,Fb as N,Ja as a,Ka as E,Y as F,gb as b,jb as h,nb as n,ob as t,pb as s,ra as _,tb as C,ub as v}from"./chunk-XLW5XAEJ.js";function B(r,l){if(r&1&&(n(0,"div",26),s(1,"p",27),t()),r&2){let p=v(),e;a(),b("errors",(e=p.addForm.get("name"))==null?null:e.errors)("fieldName","name")}}function $(r,l){if(r&1&&(n(0,"div",26),s(1,"p",27),t()),r&2){let p=v(),e;a(),b("errors",(e=p.addForm.get("details"))==null?null:e.errors)("fieldName","details")}}function H(r,l){if(r&1&&(n(0,"div",26),s(1,"p",27),t()),r&2){let p=v(),e;a(),b("errors",(e=p.addForm.get("address"))==null?null:e.errors)("fieldName","address")}}function J(r,l){if(r&1&&(n(0,"div",26),s(1,"p",27),t()),r&2){let p=v(),e;a(),b("errors",(e=p.addForm.get("postalCode"))==null?null:e.errors)("fieldName","postalCode")}}function K(r,l){if(r&1&&(n(0,"div",26),s(1,"p",27),t()),r&2){let p=v(),e;a(),b("errors",(e=p.addForm.get("city"))==null?null:e.errors)("fieldName","city")}}var ne=(()=>{let l=class l{constructor(e){this.placesService=e,this.fb=_(V),this.router=_(A),this.propertyService=_(I),this.placesApiClient=_(z),this.addForm=this.fb.group({name:["",[o.required,o.minLength(3),o.maxLength(50)]],details:["",[o.required,o.minLength(3),o.maxLength(500)]],address:["",o.required],postalCode:["",[o.minLength(4),o.maxLength(20)]],city:["",o.required],country:["Espa\xF1a",o.required],latitude:["",[o.required,o.min(-90),o.max(90)]],longitude:["",[o.required,o.min(-180),o.max(180)]],is_available:[!1,o.required],bedrooms:[4,o.required],bathrooms:[2,o.required],property_size:[120,o.required],smoking_allowed:[!1],pets_allowed:[!0],couples_allowed:[!1],occupantCount:[0]}),this.formSubmitted=!1}ngOnInit(){}onSubmit(){if(this.formSubmitted=!0,this.addForm.valid){let e=this.addForm.value;e.latitude=Number(e.latitude),e.longitude=Number(e.longitude),this.propertyService.createProperty(e).subscribe(d=>{console.log(d),this.router.navigate(["/publish/properties"])},d=>{console.log(d)})}}onAddressChange(){let e=this.addForm.get("address"),d=this.addForm.get("postalCode"),i=this.addForm.get("latitude"),c=this.addForm.get("longitude");if(console.log("onAddressChange"),e&&d&&i&&c){let w=e.value,x=d.value;w&&x&&this.placesApiClient.get(`/${w}, ${x}.json`,{}).subscribe(f=>{let{features:u}=f;if(console.log(u),u.length>0){let{center:y}=u[0];i.setValue(y[1]),c.setValue(y[0]);let S=this.placesService.getCityFromFeature(u[0]);this.addForm.get("city").setValue(S),console.log(S)}},f=>{console.log(f)})}}onNoClick(){this.router.navigate(["/publish/properties"])}};l.\u0275fac=function(d){return new(d||l)(E(G))},l.\u0275cmp=F({type:l,selectors:[["app-add"]],standalone:!0,features:[N],decls:49,vars:6,consts:[[1,"container","mx-auto","px-5","my-10"],[1,"w-full","mx-auto","justify-center","max-w-[45rem]"],[1,"btn","btn-small","btn-outline-primary",3,"click"],[1,"text-center","text-4xl","font-semibold","mb-5"],[1,"form"],[3,"formGroup","ngSubmit"],[1,"mb-4"],[1,"mb-2"],["for","name"],["formControlName","name","id","name","type","text","placeholder","Name",1,"w-full","mt-2"],["class","w-fit bg-red-100 px-2 py-[0.4rem] rounded-md border border-red-500 text-sm text-red-500"],["for","details"],["name","details","rows","10","formControlName","details","id","details","type","text","placeholder","Details",1,"w-full","mt-2"],["for","address"],["id","address","type","text","placeholder","address","formControlName","address",1,"w-full","mt-2",3,"change"],["for","postalCode"],["id","postalCode","type","text","placeholder","postalCode","formControlName","postalCode",1,"w-full","mt-2",3,"change"],["for","city"],["id","city","type","text","placeholder","city","formControlName","city",1,"w-full","mt-2"],[1,"mb-4","flex"],["for","is_available",1,"mb-0","mr-1"],["formControlName","is_available","id","is_available","value","IsAvailable","type","checkbox"],["type","hidden","formControlName","latitude"],["type","hidden","formControlName","longitude"],[1,"flex","items-center","gap-5"],["type","submit",1,"btn","btn-normal","btn-primary"],[1,"w-fit","bg-red-100","px-2","py-[0.4rem]","rounded-md","border","border-red-500","text-sm","text-red-500"],["roomLabel","",3,"errors","fieldName"]],template:function(d,i){if(d&1&&(n(0,"div",0)(1,"div",1)(2,"button",2),C("click",function(){return i.onNoClick()}),m(3," Back "),t(),n(4,"h1",3),m(5,"Add New Property"),t(),n(6,"div",4)(7,"div")(8,"form",5),C("ngSubmit",function(){return i.onSubmit()}),n(9,"div")(10,"div",6)(11,"div",7)(12,"label",8),m(13,"Name"),t(),s(14,"input",9),t(),g(15,B,2,2,"div",10),t(),n(16,"div",6)(17,"div",7)(18,"label",11),m(19,"Details"),t(),s(20,"textarea",12),t(),g(21,$,2,2,"div",10),t(),n(22,"div",6)(23,"div",7)(24,"label",13),m(25,"Address"),t(),n(26,"input",14),C("change",function(){return i.onAddressChange()}),t()(),g(27,H,2,2,"div",10),t(),n(28,"div",6)(29,"div",7)(30,"label",15),m(31,"Postal Code"),t(),n(32,"input",16),C("change",function(){return i.onAddressChange()}),t()(),g(33,J,2,2,"div",10),t(),n(34,"div",6)(35,"div",7)(36,"label",17),m(37,"City"),t(),s(38,"input",18),t(),g(39,K,2,2,"div",10),t(),n(40,"div",19)(41,"label",20),m(42,"Is Available"),t(),s(43,"input",21),t()(),s(44,"input",22)(45,"input",23),n(46,"div",24)(47,"button",25),m(48," Save "),t()()()()()()()),d&2){let c,w,x,f,u;a(8),b("formGroup",i.addForm),a(7),h(15,i.formSubmitted&&((c=i.addForm.get("name"))!=null&&c.errors)?15:-1),a(6),h(21,i.formSubmitted&&((w=i.addForm.get("details"))!=null&&w.errors)?21:-1),a(6),h(27,i.formSubmitted&&((x=i.addForm.get("address"))!=null&&x.errors)?27:-1),a(6),h(33,i.formSubmitted&&((f=i.addForm.get("postalCode"))!=null&&f.errors)?33:-1),a(6),h(39,i.formSubmitted&&((u=i.addForm.get("city"))!=null&&u.errors)?39:-1)}},dependencies:[k,j,T,M,P,q,O,L,D,R],styles:[".form[_ngcontent-%COMP%]{width:100%;border-radius:.25rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(228 228 231 / var(--tw-border-opacity));--tw-bg-opacity: 1;background-color:rgb(250 250 250 / var(--tw-bg-opacity));padding:1.25rem 1.25rem 1.5rem;--tw-shadow: 0 1px 2px 0 rgb(0 0 0 / .05);--tw-shadow-colored: 0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow)}[_ngcontent-%COMP%]:is(.dark   .form)[_ngcontent-%COMP%]{--tw-bg-opacity: 1;background-color:hsl(0 0% 25% / var(--tw-bg-opacity))}label[_ngcontent-%COMP%]{display:block;font-weight:700}input[_ngcontent-%COMP%]{display:block;border-radius:.375rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(228 228 231 / var(--tw-border-opacity));padding:.5rem .75rem;line-height:1.25rem;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}input[_ngcontent-%COMP%]:focus{--tw-border-opacity: 1;border-color:hsl(161.647 70% 52% / var(--tw-border-opacity));--tw-shadow: 0 0 2px 3px hsla(161.647, 70%, 52%, .3);--tw-shadow-colored: 0 0 2px 3px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);outline:2px solid transparent;outline-offset:2px}textarea[_ngcontent-%COMP%]{display:block;border-radius:.375rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(228 228 231 / var(--tw-border-opacity));padding:.5rem .75rem;line-height:1.25rem;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}textarea[_ngcontent-%COMP%]:focus{--tw-border-opacity: 1;border-color:hsl(161.647 70% 52% / var(--tw-border-opacity));--tw-shadow: 0 0 2px 3px hsla(161.647, 70%, 52%, .3);--tw-shadow-colored: 0 0 2px 3px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);outline:2px solid transparent;outline-offset:2px}select[_ngcontent-%COMP%]{display:block;border-radius:.375rem;border-width:1px;--tw-border-opacity: 1;border-color:rgb(228 228 231 / var(--tw-border-opacity));padding:.5rem .75rem;line-height:1.25rem;transition-property:color,background-color,border-color,text-decoration-color,fill,stroke;transition-timing-function:cubic-bezier(.4,0,.2,1);transition-duration:.15s}select[_ngcontent-%COMP%]:focus{--tw-border-opacity: 1;border-color:hsl(161.647 70% 52% / var(--tw-border-opacity));--tw-shadow: 0 0 2px 3px hsla(161.647, 70%, 52%, .3);--tw-shadow-colored: 0 0 2px 3px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000),var(--tw-ring-shadow, 0 0 #0000),var(--tw-shadow);outline:2px solid transparent;outline-offset:2px}"]});let r=l;return r})();export{ne as default};
